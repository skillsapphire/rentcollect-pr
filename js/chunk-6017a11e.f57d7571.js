(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6017a11e"],{2032:function(e,t,r){},"67df":function(e,t,r){"use strict";var s=r("2032"),a=r.n(s);a.a},a49f:function(e,t,r){"use strict";var s=r("d225"),a=r("b0b4"),i=r("85f2"),n=r.n(i);function l(e,t,r){return t in e?n()(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=r("bc3a"),c=r.n(o),d=r("c4c6"),u="https://rentcollect.herokuapp.com/api/",p=function(){function e(){Object(s["a"])(this,e),l(this,"property",{})}return Object(a["a"])(e,[{key:"setProperty",value:function(e){this.property=e}},{key:"getPropertyData",value:function(){return this.property}},{key:"getAllProperties",value:function(e,t,r,s){return c.a.get(u+"property/"+e+"?page="+t+"&sortField="+r+"&sortType="+s,{headers:Object(d["a"])()})}},{key:"getProperty",value:function(e,t){return c.a.get(u+"user/"+e+"/property/"+t,{headers:Object(d["a"])()})}},{key:"createEditProperty",value:function(e,t){return t.id?c.a.put(u+"user/"+e+"/property/"+t.id,t,{headers:Object(d["a"])()}):c.a.post(u+"property/"+e,t,{headers:Object(d["a"])()})}},{key:"deleteProperty",value:function(e,t){return c.a.delete(u+"user/"+e+"/property/"+t,{headers:Object(d["a"])()})}},{key:"rentProperty",value:function(e,t){return c.a.post(u+"rent/"+e,t,{headers:Object(d["a"])()})}},{key:"getRentDetail",value:function(e){return c.a.get(u+"rent/"+e,{headers:Object(d["a"])()})}},{key:"passwordReset",value:function(e,t){return c.a.put(u+"user/reset/"+e,t,{headers:Object(d["a"])()})}},{key:"emailOwner",value:function(e){return c.a.post(u+"rent/notifyOwner",e,{headers:Object(d["a"])()})}}]),e}();t["a"]=new p},c7d1:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[e.message?r("div",{staticClass:"alert alert-danger alert-dismissible"},[r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert"}},[e._v("Ã—")]),r("strong",[e._v(e._s(e.message))])]):e._e(),0!=e.properties.length||e.loading?e._e():r("div",{staticClass:"alert alert-info"},[e._v("\n    No properties found, please\n    "),r("router-link",{attrs:{to:"/createproperty/c"}},[e._v("create property")])],1),e.loading&&!e.message?r("div",{staticClass:"container text-center"},[r("div",[e._v("Fetching Properties Detail")]),r("span",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"spinner-grow spinner-grow-lg text-info"})]):e._e(),0!=e.totalPropertiesCount?r("div",[0!=e.totalPropertiesCount?r("span",{staticClass:"display-4"},[e._v("Total properties: "+e._s(e.totalPropertiesCount))]):e._e(),r("div",{staticClass:"d-flex mt-5"},[r("label",{attrs:{for:"attribute"}},[e._v("Filter By")]),r("div",{staticClass:"form-group ml-2"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedField,expression:"selectedField"}],staticClass:"form-control",attrs:{id:"attribute"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedField=t.target.multiple?r:r[0]},function(t){return e.filterProperty()}]}},e._l(e.selectedFieldList,(function(t){return r("option",{key:t.empId,domProps:{value:t.empId}},[e._v(e._s(t.empValue))])})),0)]),r("div",{staticClass:"form-group ml-2"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedOrder,expression:"selectedOrder"}],staticClass:"form-control",attrs:{id:"order"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedOrder=t.target.multiple?r:r[0]},function(t){return e.filterProperty()}]}},e._l(e.selectedOrderList,(function(t){return r("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])})),0)])]),r("div",{staticClass:"row"},e._l(e.properties,(function(t){return r("div",{key:t.id,staticClass:"col-12"},[r("div",{staticClass:"card shadow"},[r("div",{staticClass:"card-body col-lg-6"},[r("h4",{staticClass:"card-title"},[e._v(e._s(t.name))]),r("p",{staticClass:"card-text"},[e._v(e._s(t.description))]),r("a",{staticClass:"card-link",attrs:{href:"#"},on:{click:function(r){return e.propertyDetail(t.id)}}},[e._v("Detail")]),r("a",{staticClass:"card-link",attrs:{href:"#"},on:{click:function(r){return e.editProperty(t)}}},[e._v("Edit")]),r("a",{staticClass:"card-link",attrs:{href:"#"},on:{click:function(r){return e.deleteProperty(t.id)}}},[e._v("Delete")])]),r("div",{staticClass:"col-lg-6"},[r("button",{staticClass:"btn btn-info",attrs:{disabled:t.rented},on:{click:function(r){return e.rentProperty(t.id)}}},[e._v("Rent this property")])])])])})),0),r("nav",[r("ul",{staticClass:"pagination"},[r("li",{staticClass:"page-item",class:0==e.currentPage?"disabled":""},[r("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(t){return e.getAllProperties(e.currentPage-1,e.selectedField,e.selectedOrder)}}},[e._v("Previous")])]),e._l(e.totalPages,(function(t){return r("li",{key:t,staticClass:"page-item",class:e.currentPage==t-1?"active":""},[r("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(r){return e.getAllProperties(t-1,e.selectedField,e.selectedOrder)}}},[e._v(e._s(t))])])})),r("li",{staticClass:"page-item",class:e.currentPage<e.totalPages-1?"":"disabled"},[r("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(t){return e.getAllProperties(e.currentPage+1,e.selectedField,e.selectedOrder)}}},[e._v("Next")])])],2)])]):e._e()])},a=[],i=r("a49f"),n={name:"Property",data:function(){return{properties:[],totalPropertiesCount:0,totalPages:0,loading:!0,message:"",currentPage:0,selectedField:"",selectedFieldList:[{empId:"createdAt",empValue:"Created date"},{empId:"name",empValue:"Property title"}],selectedOrder:"",selectedOrderList:["Asc","Desc"]}},methods:{filterProperty:function(){this.getAllProperties(this.currentPage,this.selectedField,this.selectedOrder)},isDisabled:function(){return this.property.rented},getAllProperties:function(e,t,r){var s=this;this.currentPage=e,0!=e&&e>this.totalPages-2?this.isLastPage=!0:this.isLastPage=!1,i["a"].getAllProperties(this.$store.state.auth.user.id,e,t,r).then((function(e){s.loading=!1,s.properties=e.data.content,s.totalPages=e.data.totalPages,s.totalPropertiesCount=e.data.totalElements,console.log(e)}),(function(e){s.message="Error occured, please try again later"}))},deleteProperty:function(e){var t=this;this.loading=!0,i["a"].deleteProperty(this.$store.state.auth.user.id,e).then((function(e){t.getAllProperties(0),t.loading=!1}),(function(e){t.message="Error occurred please try again",t.loading=!1}))},editProperty:function(e){this.$router.push("/createproperty/"+e.id)},propertyDetail:function(e){this.$router.push("/propertyDetail/"+e)},rentProperty:function(e){this.$router.push("/rent/"+e)}},mounted:function(){this.selectedOrder=this.selectedOrderList[0],this.selectedField=this.selectedFieldList[0]["empId"],this.$store.state.auth.user||this.$router.push("/login"),this.getAllProperties(0,this.selectedField,this.selectedOrder)}},l=n,o=(r("67df"),r("2877")),c=Object(o["a"])(l,s,a,!1,null,"794a077f",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-6017a11e.f57d7571.js.map