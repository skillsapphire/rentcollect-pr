{"version":3,"sources":["webpack:///./src/views/property/Property.vue?2eb7","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty.js","webpack:///./src/services/prop.service.js","webpack:///./src/views/property/Property.vue?116b","webpack:///src/views/property/Property.vue","webpack:///./src/views/property/Property.vue?2760","webpack:///./src/views/property/Property.vue"],"names":["_defineProperty","obj","key","value","enumerable","configurable","writable","API_URL","PropService","property","this","userId","pageNo","sortField","sortType","axios","get","headers","authHeader","propertyId","id","put","post","delete","rent","requestObj","rentDetail","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","message","_e","properties","length","loading","directives","name","rawName","expression","totalPropertiesCount","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","selectedField","multiple","filterProperty","_l","selectedItem","empId","domProps","empValue","selectedOrder","selectedOrderItem","description","propertyDetail","editProperty","deleteProperty","rented","rentProperty","class","currentPage","getAllProperties","page","totalPages","staticRenderFns","data","selectedFieldList","selectedOrderList","methods","isDisabled","isLastPage","$router","push","mounted","$store","state","auth","user","component"],"mappings":"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","file":"js/chunk-6017a11e.f57d7571.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Property.vue?vue&type=style&index=0&id=794a077f&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Property.vue?vue&type=style&index=0&id=794a077f&scoped=true&lang=css&\"","import _Object$defineProperty from \"../../core-js/object/define-property\";\nexport default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    _Object$defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import axios from 'axios';\r\nimport authHeader from './auth-header';\r\n\r\nconst API_URL = 'https://rentcollect.herokuapp.com/api/';\r\n\r\nclass PropService {\r\n\r\n  property = {};\r\n\r\n  setProperty(property){\r\n    this.property = property;\r\n  }\r\n  getPropertyData(){\r\n    return this.property;\r\n  }\r\n  getAllProperties(userId, pageNo, sortField, sortType) {\r\n    return axios.get(API_URL + 'property/'+userId+'?page='+pageNo+'&sortField='+sortField+'&sortType='+sortType, { headers: authHeader() });\r\n  }\r\n  getProperty(userId, propertyId) {\r\n    return axios.get(API_URL + 'user/'+userId+ '/property/'+ propertyId, { headers: authHeader() });\r\n  }\r\n  createEditProperty(userId, property) {\r\n    if(property.id){\r\n      return axios.put(API_URL + 'user/'+userId+ '/property/'+ property.id, property, { headers: authHeader() });\r\n    }\r\n    return axios.post(API_URL + 'property/'+userId, property, { headers: authHeader() });\r\n  }\r\n\r\n  deleteProperty(userId, propertyId) {\r\n    return axios.delete(API_URL + 'user/'+userId+ '/property/'+ propertyId, { headers: authHeader() });\r\n  }\r\n  rentProperty(propertyId,rent) {\r\n \r\n        return axios.post(API_URL + 'rent/'+ propertyId, rent, { headers: authHeader() });\r\n    }\r\n\r\n  getRentDetail(userId) {\r\n    return axios.get(API_URL + 'rent/'+ userId,{ headers: authHeader() });\r\n\r\n}\r\npasswordReset(userId, requestObj) {\r\n  return axios.put(API_URL + 'user/reset/'+userId, requestObj, { headers: authHeader() });\r\n\r\n}\r\nemailOwner(rentDetail) {\r\n  return axios.post(API_URL + 'rent/notifyOwner', rentDetail, { headers: authHeader() });\r\n\r\n}\r\n}\r\n\r\nexport default new PropService();\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[(_vm.message)?_c('div',{staticClass:\"alert alert-danger alert-dismissible\"},[_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"alert\"}},[_vm._v(\"×\")]),_c('strong',[_vm._v(_vm._s(_vm.message))])]):_vm._e(),(_vm.properties.length == 0 && !_vm.loading)?_c('div',{staticClass:\"alert alert-info\"},[_vm._v(\"\\n    No properties found, please\\n    \"),_c('router-link',{attrs:{\"to\":\"/createproperty/c\"}},[_vm._v(\"create property\")])],1):_vm._e(),(_vm.loading && !_vm.message)?_c('div',{staticClass:\"container text-center\"},[_c('div',[_vm._v(\"Fetching Properties Detail\")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"spinner-grow spinner-grow-lg text-info\"})]):_vm._e(),(_vm.totalPropertiesCount != 0)?_c('div',[(_vm.totalPropertiesCount != 0)?_c('span',{staticClass:\"display-4\"},[_vm._v(\"Total properties: \"+_vm._s(_vm.totalPropertiesCount))]):_vm._e(),_c('div',{staticClass:\"d-flex mt-5\"},[_c('label',{attrs:{\"for\":\"attribute\"}},[_vm._v(\"Filter By\")]),_c('div',{staticClass:\"form-group ml-2\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedField),expression:\"selectedField\"}],staticClass:\"form-control\",attrs:{\"id\":\"attribute\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedField=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},function($event){return _vm.filterProperty()}]}},_vm._l((_vm.selectedFieldList),function(selectedItem){return _c('option',{key:selectedItem.empId,domProps:{\"value\":selectedItem.empId}},[_vm._v(_vm._s(selectedItem.empValue))])}),0)]),_c('div',{staticClass:\"form-group ml-2\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedOrder),expression:\"selectedOrder\"}],staticClass:\"form-control\",attrs:{\"id\":\"order\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedOrder=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},function($event){return _vm.filterProperty()}]}},_vm._l((_vm.selectedOrderList),function(selectedOrderItem){return _c('option',{key:selectedOrderItem,domProps:{\"value\":selectedOrderItem}},[_vm._v(_vm._s(selectedOrderItem))])}),0)])]),_c('div',{staticClass:\"row\"},_vm._l((_vm.properties),function(property){return _c('div',{key:property.id,staticClass:\"col-12\"},[_c('div',{staticClass:\"card shadow\"},[_c('div',{staticClass:\"card-body col-lg-6\"},[_c('h4',{staticClass:\"card-title\"},[_vm._v(_vm._s(property.name))]),_c('p',{staticClass:\"card-text\"},[_vm._v(_vm._s(property.description))]),_c('a',{staticClass:\"card-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.propertyDetail(property.id)}}},[_vm._v(\"Detail\")]),_c('a',{staticClass:\"card-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.editProperty(property)}}},[_vm._v(\"Edit\")]),_c('a',{staticClass:\"card-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.deleteProperty(property.id)}}},[_vm._v(\"Delete\")])]),_c('div',{staticClass:\"col-lg-6\"},[_c('button',{staticClass:\"btn btn-info\",attrs:{\"disabled\":property.rented},on:{\"click\":function($event){return _vm.rentProperty(property.id)}}},[_vm._v(\"Rent this property\")])])])])}),0),_c('nav',[_c('ul',{staticClass:\"pagination\"},[_c('li',{staticClass:\"page-item\",class:_vm.currentPage==0 ? 'disabled': ''},[_c('a',{staticClass:\"page-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.getAllProperties(_vm.currentPage-1, _vm.selectedField, _vm.selectedOrder)}}},[_vm._v(\"Previous\")])]),_vm._l((_vm.totalPages),function(page){return _c('li',{key:page,staticClass:\"page-item\",class:_vm.currentPage == (page-1) ? 'active': ''},[_c('a',{staticClass:\"page-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.getAllProperties(page-1, _vm.selectedField, _vm.selectedOrder)}}},[_vm._v(_vm._s(page))])])}),_c('li',{staticClass:\"page-item\",class:_vm.currentPage<_vm.totalPages-1 ? '': 'disabled'},[_c('a',{staticClass:\"page-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.getAllProperties(_vm.currentPage+1, _vm.selectedField, _vm.selectedOrder)}}},[_vm._v(\"Next\")])])],2)])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <div v-if=\"message\" class=\"alert alert-danger alert-dismissible\">\r\n      <button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>\r\n      <strong>{{message}}</strong>\r\n    </div>\r\n    <div v-if=\"properties.length == 0 && !loading\" class=\"alert alert-info\">\r\n      No properties found, please\r\n      <router-link to=\"/createproperty/c\">create property</router-link>\r\n    </div>\r\n\r\n    <div class=\"container text-center\" v-if =\"loading && !message\">\r\n      <div>Fetching Properties Detail</div>\r\n      <span v-show=\"loading\" class=\"spinner-grow spinner-grow-lg text-info\"></span>\r\n    </div>\r\n\r\n    <div v-if=\"totalPropertiesCount != 0\">\r\n      <span\r\n        v-if=\"totalPropertiesCount != 0\"\r\n        class=\"display-4\">Total properties: {{totalPropertiesCount}}</span>\r\n      <div class=\"d-flex mt-5\">\r\n        <label for=\"attribute\">Filter By</label>\r\n        <div class=\"form-group ml-2\">\r\n          <select\r\n            id=\"attribute\"\r\n            class=\"form-control\"\r\n            v-model=\"selectedField\"\r\n            v-on:change=\"filterProperty()\"\r\n          >\r\n            <option\r\n              v-bind:value=\"selectedItem.empId\"\r\n              v-for=\"selectedItem in selectedFieldList\"\r\n              :key=\"selectedItem.empId\"\r\n            >{{selectedItem.empValue}}</option>\r\n          </select>\r\n        </div>\r\n        <div class=\"form-group ml-2\">\r\n          <select\r\n            id=\"order\"\r\n            class=\"form-control\"\r\n            v-model=\"selectedOrder\"\r\n            v-on:change=\"filterProperty()\"\r\n          >\r\n            <option\r\n              v-bind:value=\"selectedOrderItem\"\r\n              v-for=\"selectedOrderItem in selectedOrderList\"\r\n              :key=\"selectedOrderItem\"\r\n            >{{selectedOrderItem}}</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"col-12\" v-for=\"property in properties\" :key=\"property.id\">\r\n          <div class=\"card shadow\">\r\n            <div class=\"card-body col-lg-6\">\r\n              <h4 class=\"card-title\">{{property.name}}</h4>\r\n              <p class=\"card-text\">{{property.description}}</p>\r\n              <a href=\"#\" @click=\"propertyDetail(property.id)\" class=\"card-link\">Detail</a>\r\n              <a href=\"#\" @click=\"editProperty(property)\" class=\"card-link\">Edit</a>\r\n              <a href=\"#\" @click=\"deleteProperty(property.id)\" class=\"card-link\">Delete</a>\r\n            </div>\r\n            <div class=\"col-lg-6\">\r\n              <button\r\n                class=\"btn btn-info\"\r\n                :disabled=\"property.rented\"\r\n                @click=\"rentProperty(property.id)\"\r\n              >Rent this property</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <nav>\r\n        <ul class=\"pagination\">\r\n          <li class=\"page-item\" :class=\"currentPage==0 ? 'disabled': ''\">\r\n            <a\r\n              class=\"page-link\"\r\n              href=\"#\"\r\n              @click=\"getAllProperties(currentPage-1, selectedField, selectedOrder)\"\r\n            >Previous</a>\r\n          </li>\r\n          <li\r\n            class=\"page-item\"\r\n            :class=\"currentPage == (page-1) ? 'active': ''\"\r\n            v-for=\"page in totalPages\"\r\n            :key=\"page\"\r\n          >\r\n            <!--currentPage={{currentPage}} ::page-1= {{page-1}}::{{currentPage == (page-1)}}-->\r\n            <a\r\n              class=\"page-link\"\r\n              href=\"#\"\r\n              @click=\"getAllProperties(page-1, selectedField, selectedOrder)\"\r\n            >{{page}}</a>\r\n          </li>\r\n          <li class=\"page-item\" :class=\"currentPage<totalPages-1 ? '': 'disabled'\">\r\n            <a\r\n              class=\"page-link\"\r\n              href=\"#\"\r\n              @click=\"getAllProperties(currentPage+1, selectedField, selectedOrder)\"\r\n            >Next</a>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport PropService from '../../services/prop.service';\r\n\r\nexport default {\r\n  name: 'Property',\r\n  data() {\r\n    return {\r\n      properties: [],\r\n      totalPropertiesCount: 0,\r\n      totalPages: 0,\r\n      loading:true,\r\n      message: '',\r\n      currentPage: 0,\r\n      selectedField: '',\r\n      selectedFieldList: [\r\n        { empId: 'createdAt', empValue: 'Created date' },\r\n        { empId: 'name', empValue: 'Property title' }\r\n      ],\r\n      selectedOrder: '',\r\n      selectedOrderList: ['Asc', 'Desc']\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    filterProperty() {\r\n      this.getAllProperties(\r\n        this.currentPage,\r\n        this.selectedField,\r\n        this.selectedOrder\r\n      );\r\n    },\r\n    isDisabled() {\r\n      return this.property.rented;\r\n    },\r\n    getAllProperties(pageNo, selectedField, selectedOrder) {\r\n      this.currentPage = pageNo;\r\n      if (pageNo != 0 && pageNo > this.totalPages - 2) {\r\n        this.isLastPage = true;\r\n      } else {\r\n        this.isLastPage = false;\r\n      }\r\n      \r\n      PropService.getAllProperties(\r\n        this.$store.state.auth.user.id,\r\n        pageNo,\r\n        selectedField,\r\n        selectedOrder\r\n      ).then(\r\n        response => {\r\n          this.loading = false;\r\n          this.properties = response.data.content;\r\n          this.totalPages = response.data.totalPages;\r\n          this.totalPropertiesCount = response.data.totalElements;\r\n          console.log(response);\r\n        },\r\n        error => {\r\n          this.message = 'Error occured, please try again later';\r\n        }\r\n      );\r\n    },\r\n    deleteProperty(propertyId) {\r\n      this.loading = true;\r\n      PropService.deleteProperty(\r\n        this.$store.state.auth.user.id,\r\n        propertyId\r\n      ).then(\r\n        response => {\r\n          this.getAllProperties(0);\r\n          this.loading = false;\r\n        },\r\n        error => {\r\n          this.message = 'Error occurred please try again';\r\n          this.loading = false;\r\n        }\r\n      );\r\n    },\r\n    editProperty(property) {\r\n      this.$router.push('/createproperty/' + property.id);\r\n    },\r\n    propertyDetail(propertyId) {\r\n      this.$router.push('/propertyDetail/' + propertyId);\r\n    },\r\n    rentProperty(propertyId) {\r\n      this.$router.push('/rent/' + propertyId);\r\n    }\r\n  },\r\n  mounted() {\r\n    this.selectedOrder = this.selectedOrderList[0];\r\n    this.selectedField = this.selectedFieldList[0]['empId'];\r\n    if (!this.$store.state.auth.user) {\r\n      this.$router.push('/login');\r\n    }\r\n    this.getAllProperties(0, this.selectedField, this.selectedOrder);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nlabel {\r\n  display: block;\r\n  margin-top: 10px;\r\n}\r\n\r\n.card-container.card {\r\n  max-width: 350px !important;\r\n  padding: 40px 40px;\r\n}\r\n\r\n.card {\r\n  background-color: #f7f7f7;\r\n  padding: 20px 25px 30px;\r\n  margin: 0 auto 25px;\r\n  margin-top: 50px;\r\n  -moz-border-radius: 2px;\r\n  -webkit-border-radius: 2px;\r\n  border-radius: 2px;\r\n  -moz-box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.3);\r\n  -webkit-box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.3);\r\n  box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.profile-img-card {\r\n  width: 96px;\r\n  height: 96px;\r\n  margin: 0 auto 10px;\r\n  display: block;\r\n  -moz-border-radius: 50%;\r\n  -webkit-border-radius: 50%;\r\n  border-radius: 50%;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Property.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Property.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Property.vue?vue&type=template&id=794a077f&scoped=true&\"\nimport script from \"./Property.vue?vue&type=script&lang=js&\"\nexport * from \"./Property.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Property.vue?vue&type=style&index=0&id=794a077f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"794a077f\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}